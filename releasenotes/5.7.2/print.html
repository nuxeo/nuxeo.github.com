<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>Nuxeo 5.7.2 - New and Noteworthy</title>
	<meta name="description" content="Nuxeo Platform 5.7.2 release notes">
	<meta name="author" content="nuxeo">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="../../stylesheets/base.css">
	<link rel="stylesheet" href="../../stylesheets/skeleton.css">
	<link rel="stylesheet" href="../../stylesheets/layout.css">
	<link rel="stylesheet" href="../../stylesheets/release_notes.css">
	<link rel="stylesheet" href="../../stylesheets/lightbox.css">


	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

<link href='http://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'>

<style>
#xnav-footer {margin-top:0px !important;}
</style>
<script src="../../javascripts/jquery-1.7.1.min.js"></script>
	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>

<body>

  <div id="mainContainer" class="container">

    <p class="backbutton"><a href="./index.html">&larr; Back to Index</a></p>
    
    <p class="remove-bottom" id="site-title"><a href="./index.html"><img src="../../images/572g.png" alt="Nuxeo 5.7.2 Tag" /> Release Notes</a></p>

    <div id="welcome">
    <div style="clear:both;"></div>
    <!-- Users -->
    <h1 style="margin-left:-0.5em !important;">For Users</h1>

<h2><a name="anchor-0">DAM</a></h2>
<h3>Bulk Tagging</h3>

<p>In the bulk edit form, you can now add tags to the selected list of documents.</p>
<p><img class="lightboxed" src="./bulkTagging.png" /></p>

<h3 style="page-break-before: always">Asset Creation</h3>

<p>When creating a new asset or bulk importing assets, you can choose the location where to import them. Only the folders where the user has the create permission are selectable.</p>
<p><img class="lightboxed" src="./whereToImport.png" /></p>
<p><img class="lightboxed" src="./bulkImportDND.png" /></p>

<h3>Assets View</h3>

<p>The view or edit layouts configured on the Document types (the ones you can configure on your own document type on Studio for instance) are displayed in the Metadata section. </p>

<h3 style="page-break-before: always">Single Asset View</h3>

<p>Improve the single asset view of an asset (new layout accessible through the permalink). </p>
<p><img class="lightboxed" src="./singleAssetView.png" /></p>

<h3>Misc Improvements</h3>

<P>Now you can use the HTML5 DnD on the Bulk import form.</p>
<P>If your import fails for some reason (for instance, if you forgot to fill a required field), you get an appropriate error message and you don't have to select DnD files to import again.</p>


<h2 style="page-break-before: always"><a name="anchor-1">Workflow</a></h2>
<h3>Escalation Rules </h3>
<p>Escalation rules let you run an operation chain when a condition is true. These conditions are evaluated every 5 minutes by a configurable scheduler. They can be executed one time (default behaviour) or multiple times.</p>
<p><img class="lightboxed" src="./escalation.png"/></p>

<h3 style="page-break-before: always">Sub-Workflow</h3>
<p>We have added a new node called SubWorkflow. As you have already guessed it, it lets you embed sub-workflow into existing one. You can also give them parameters, escalation rules, input and output chains, and transitions, like a regular node. </p>
<p><img class="lightboxed" src="./subWorkflow.png"/></p>

<h3>Exclusive Node</h3>
<p>When the workflow engine runs an exclusive node, it evaluates the transitions one by one and stops at the first one evaluated to true.</p>
<p><img class="lightboxed" src="./exclusiveNode.png"/></p>

<h3>New Workflow Operations</h3>

<p>We've added new operations to cancel a workflow, resume a node, get the opened tasks, and complete a task and also improved the <em>Start Workflow</em> and <em>Set Workflow variable</em> operations.</p>

<h2><a name="anchor-2">Video</a></h2>
<p>The video.js player has been updated to version 4.1.0. This will enable us to benefit from their new plugin architecture. The first plugin we've integrated shows thumbnails of the video while hovering on the progress bar.</p>
<p><img class="lightboxed" src="./videoThumb.png" /></p>

<h2><a name="anchor-3">Ergonomy and UX</a></h2>
<p>Tables, forms and layout have been reviewed and simplified.
A focus has been added to simplify the fill of inputs and make the document edition smoother.</p>

<p>We have started to update the icons throughout the platform. This effort will continue until the next LTS release.</p>

<h2><a name="anchor-4">Translations</a></h2>
<p>Some contributions have been integrated to Nuxeo. Thanks to Patrick Turcotte for the French (Canada) translation and to Jordi Mallach for the Catalan translation.</p>

<p style="page-break-before: always"><!-- Administrators --></p>
<h1 style="margin-left:-0.5em !important">For Administrators</h1>

  <h2><a name="anchor-0">Monitoring</a></h2>
    <p>Upgrade to the latest <a href="https://jira.nuxeo.com/browse/NXP-11995">metrics codahale lib</a> providing more metrics and fixes. Also note that metrics names have changed. Read more in our <a href="http://doc.nuxeo.com/x/gBDF">documentation</a>.</p>
<p><img class="lightboxed" src="./nuxeo-jmx-metrics.png"/></p>

  <h2><a name="anchor-1">Multi-Tabs Navigation</a></h2>
  <p>Nuxeo now handles multiple-tabs navigation without having a "cannot restore view" error. A new StateManager has been introduced in order to store ViewStates per conversation. In other words, when a user navigates to a new tab, a new conversation is started and its view states are saved separately. If the user comes back to an old tab, he will not have "view expired" exceptions anymore.</p>
  <ul>
    <li>By default, 4 conversation states are saved following a LRU policy (Least Recently Used).</li>
    <li>Each conversation state still has max 4 saved view states.</li>
    <li>This means that potentially, a maximum of 16 view states are saved in session.</li>
  </ul>
  <p>You can adapt these settings using the apropriate parameters in nuxeo.conf.</p>


<h2><a name="anchor-2">Nuxeo.conf New Parameters</a></h2>
<table class="release">
<thead>
<tr><th>Parameter</th><th>Default Value</th><th>Description</th></tr>
</thead>
  <tr><td class="parameter">nuxeo.jsf.numberOfConversationsInSession</td><td>4</td><td>Since 5.7.2, Parameter to control the number of conversation states that are saved in session. Each conversation holds a number of view states that is defined by nuxeo.jsf.numberOfViewsInSession</td></tr>
  <tr><td class="parameter">nuxeo.jsf.numberOfViewsInSession</td><td>4</td><td>Since 5.7.2 (5.6-HF20) Parameter to control the JSF init parameter com.sun.faces.numberOfViewsInSession</td></tr>
  <tr><td class="parameter">nuxeo.jsf.numberOfLogicalViews</td><td>4</td><td>Since 5.7.2 (5.6-HF20) Parameter to control the JSF init parameter com.sun.faces.numberOfLogicalViews
</td></tr>
  <tr><td class="parameter">nuxeo.notification.eMailSigner</td><td>The Nuxeo team</td><td>Signer of the sent e-mail.</td></tr>
</table>

     <p style="page-break-before: always"><!-- Developers --></p>
     <h1  style="margin-left:-0.5em !important">For Developers</h1>


<h2><a name="anchor-0">Content Automation</a></h2>
<p>We made a lot of progress on the Content Automation API.</p>
<p>It's possible to contribute a chain into another chain -> Composite Automation Chain</p>
<p>It's possible to add parameters to a chain</p>
<p>Chains contributed are displayed into the Automation documentation with operations listing, parameters and input/output.</p>
<p>An Automation Client Test Suite in Java (or Java Test Compatibility Kit -> TCK) is provided for helping people understanding how Automation is working remotely. You can read our <a href="http://doc.nuxeo.com/x/v4XZ">documentation</a> for the details.</p>
<p><a href="http://doc.nuxeo.com/x/vwIz#UsingNuxeoAutomationClient-managing-business-objectsManagingBusinessObjects">Managing business objects</a> (Plain Old Java Object client side for mapping Nuxeo Document Model Adapter server side) is now available.</p>

<p>The goal is to manipulate business object and avoid direct DocumentModel manipulation on client side:</p>
  
<div class="embededCode"><pre>
pull : BusinessObject (POJO) <----JSON---- DocumentModelAdapter <---- DocumentModel

push : BusinessObject (POJO) -----JSON---> DocumentModelAdapter ----> DocumentModel

</pre></div>

<h2 style="page-break-before: always"><a name="anchor-1">Document Oriented REST API</a></h2>
<p>We have a new <a href="http://doc.nuxeo.com/x/WIvZ">document oriented API</a> for CRUD operation.</p>

<h3>Create</h3>
<div class="embededCode"><pre>
<strong>POST</strong> /nuxeo/site/api/id/{idOfTheDoc}
{
    "entity-type": "document",
    "name":"newName",
    "type": "File",
    "properties": {
        "common:icon": "/icons/domain.gif",
        "common:icon-expanded": null,
        "common:size": null
    }
}
</pre></div>

<h3>Read</h3>
<div class="embededCode"><pre>
<strong>GET</strong> /nuxeo/site/api/path/{pathOfTheDoc}
<strong>GET</strong> /nuxeo/site/api/id/{idOfTheDoc}
</pre></div>

<h3>Update</h3>
<div class="embededCode"><pre>
<strong>PUT</strong> /nuxeo/site/api/id/{idOfTheDoc}
{
    "entity-type": "document",
    "repository": "default",
    "uid": "37b1502b-26ff-430f-9f20-4bd0d803191e",
    "properties": {
        "common:icon": "/icons/domain.gif",
        "common:icon-expanded": null,
        "common:size": null
    }
}
</pre></div>

<h3>Delete</h3>
<div class="embededCode"><pre>
<strong>DELETE</strong> /nuxeo/site/api/id/{idOfTheDoc}
</pre></div>


<h3> Domain model object and Automation </h3>
<p>You can use <a href="http://doc.nuxeo.com/x/WIvZ#DocumentorientedRESTAPI-Businessobjectadapters">Business objects with Automation</a>. They are also binded on the REST API and you just have to use the same semantics than for document resources.</p>

<h3 style="page-break-before: always">Updating a business object</h3>
<div class="embededCode"><pre>
<strong>PUT</strong>  /nuxeo/site/api/path/{pathOfTheDoc}/@bo/BusinessBeanAdapter
{
    "entity-typee: "BusinessBeanAdapter"
    "value": {
        id: "37b1502b-26ff-430f-9f20-4bd0d803191e",
        "type": "Domain",
        "title":"Default domain"
        "description:"My new description"
     }
}
</pre></div>

<h2><a name="anchor-2">Richfaces</a></h2>

<p>Nuxeo uses a custom version of Richfaces based on 3.3.1 GA, This custom version of Richfaces is now available on <a href="https://github.com/nuxeo/richfaces">GitHub</a> with all Nuxeo's patches.</p>

<h2><a name="anchor-3">CMIS</a></h2>

<p>We've upgraded OpenCMIS to 0.9.0 . This gives us the new CMIS 1.1 browser bindings but we haven't finished implementing all the new features yet.</p>

<h2><a name="anchor-4">Content Views</a></h2>
<p>On Nuxeo side, filter can be shown unfolded by default, and some content view templates have been redefined to ease the customization.</p>
<p>On Studio side, the "filter unfolded" option is presented for 5.7.2, and events as well as the page provider class and properties can now be configured also.</p>

<h2><a name="anchor-5">CORS support</a></h2>
<p>If you do cross-domain requests from any JavaScript client to access WebEngine resources or Automation APIs, there's a chance that your browser forbids it. <a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a> allows you to communicate with Nuxeo from another domain using XMLHttpRequests.</p>

<p>We've added <a href="http://doc.nuxeo.com/x/vIvZ">a new extension point</a> based on Vladimir Dzhuvinov's universal CORS filter, which allows you to configure on which URL cross-origin headers are needed.</p>
<h2><a name="anchor-6">Scan Importer</a></h2>
<p>The scan importer has been improved. You can choose if you want to create the import document container each time you launch an import. You can also choose to update an existing document instead of creating a new one.</p>

<h2><a name="anchor-7">New Operation</a></h2>

<h3>Get a Directory Projection</h3>
<p><strong>Category:</strong> Services</p>
<p><strong>Operation Id:</strong> <a href="http://explorer.nuxeo.org/nuxeo/site/distribution/current/viewOperation/Directory.Projection">Directory.Projection</a></p>
<p>Executes a query using given filter and return only the column *<b>columnName</b>*. The result is assigned to the context variable *<b>variableName</b>*. The filters are specified as <i>key=value</i> pairs separated by a new line. The key used for a filter is the column name of the directory. To specify multi-line values you can use a \\ character followed by a new line.</p>
<p>Example:</p>
<div class="embededCode"><pre>
firstName=John
lastName=doe
</pre></div>
<p>By default, the search filters use exact match. You can do a fulltext search on some specific columns using the fulltextFields. it's specified as comma separated columnName, for instance:</p><p>Example:</p><div class="embededCode"><pre>firstName,lastName</pre></div></p>


<h3>Run For Each in new TX</h3>
<p><strong>Category:</strong> Execution Flow</p>
<p><strong>Operation Id:</strong> <a href="http://explorer.nuxeo.org/nuxeo/site/distribution/current/viewOperation/Context.RunOperationOnListInNewTx">Context.RunOperationOnListInNewTx</a></p>
<p>Run an operation in a new Transaction for each element from the list defined by the 'list' paramter. The 'list' parameter is pointing to context variable that represent the list which will be iterated. The 'item' parameter represent the name of the context varible which will point to the current element in the list at each iteration. You can use the 'isolate' parameter to specify whether or not the evalution context is the same as the parent context or a copy of it. If the isolate is 'true' then a copy of the current contetx is used and so that modifications in this context will not affect the parent context. Any input is accepted. The input is returned back as output when operation terminate. </p>


<h2 style="page-break-before: always"><a name="anchor-8">Login Page</a></h2>

<p>The login page can now be configured via an extension point, making it easier to upgrade when the login page is customized, and benefit from new features, like <a href="http://www.nuxeo.com/blog/development/2013/03/contributed-openid-authentication-nelson-silva/">OpenID authentication</a> provided by Nelson Silva.</p>

<p>Here is a sample configuration for the login page:</p>
<div class="embededCode"><pre>
&lt;extension target="org.nuxeo.ecm.platform.ui.web.auth.service.PluggableAuthenticationService" point="loginScreen"&gt;
  &lt;loginScreenConfig&gt;
    &lt;bodyBackgroundStyle&gt;url("${org.nuxeo.ecm.contextPath}/img/my_login_background_img.png") 100px 100px no-repeat black&lt;/bodyBackgroundStyle&gt;
    &lt;headerStyle&gt;&lt;/headerStyle&gt;
    &lt;footerStyle&gt;display: none;&lt;/footerStyle&gt;
    &lt;loginBoxBackgroundStyle&gt;url("${org.nuxeo.ecm.contextPath}/img/my_background_img.png") 0 0 no-repeat green&lt;/loginBoxBackgroundStyle&gt;
    &lt;loginBoxWidth&gt;100px&lt;/loginBoxWidth&gt;
    &lt;logoUrl&gt;${org.nuxeo.ecm.contextPath}/img/my_logo.png&lt;/logoUrl&gt;
    &lt;logoAlt&gt;My logo Alt&lt;/logoAlt&gt;
    &lt;logoWidth&gt;100px&lt;/logoWidth&gt;
    &lt;logoHeight&gt;100px&lt;/logoHeight&gt;
    &lt;newsIframeUrl&gt;https://www.nuxeo.com/embedded/dm-login&lt;/newsIframeUrl&gt;
  &lt;/loginScreenConfig&gt;
&lt;/extension&gt;
</pre></div>

<h2><a name="anchor-9">Long Running Listener</a></h2>
<p>You can now extend a new abstract class called <strong>AbstractLongRunningListener</strong>. Its purpose is to help building an Asynchronous listeners that will handle a long running process. </p>
<p>By default, PostCommitEventListener is executed in a Worker that will take care of starting/comitting the transaction.</p>
<p>If the listener requires a long processing, this will create long transactions which should be avoided. To avoid this behavior, this base class split the processing in 3 steps:</p>
<ul>
<li>Pre processing: transactional first step</li>
<li>Long running: long running processing that should not require transactional resources</li>
<li>Post processing: transactional final step
</ul>
<p>To manage sharing between the 3 steps, a simple Map is provided.</p>

<h2><a name="anchor-10">Move To Tomcat 7</a></h2>
<p>Tomcat has been upgraded to version 7.0.42. The main improvement is the upgrade to the Servlet 3.0 API. Take a look at the <a href="http://tomcat.apache.org/migration-7.html">details</a>. </p>

    </div>

</div>

	<!-- JS
	================================================== -->
    <script src="../../javascripts/strftime.js"></script>
    <script src="../../javascripts/tabs.js"></script>

</body></html>
