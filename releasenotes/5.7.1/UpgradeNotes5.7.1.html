<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by LibreOffice - see http://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">Nuxeo Issue Tracker</title><meta name="DCTERMS.title" content="Nuxeo Issue Tracker" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
	@page {  }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:10pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	<!-- "li span.odfLiEnd" - IE 7 issue-->
	li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
	* { margin:0;}
	.ta1 { writing-mode:lr-tb; }
	.Default { font-family:Arial; }
	.ce1 { font-family:Arial; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-width:0.0878cm; border-top-style:solid; border-top-color:#000000; }
	.ce2 { font-family:Arial; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.ce3 { font-family:Arial; border-bottom-width:0.0878cm; border-bottom-style:solid; border-bottom-color:#000000; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; }
	.co1 { width:0.889in; }
	.ro1 { height:0.1681in; }
	<!-- ODF styles with no properties representable as CSS -->
	 { }
	</style></head><body dir="ltr" style="writing-mode:lr-tb; "><table border="0" cellspacing="0" cellpadding="0" class="ta1"><colgroup><col width="99"/><col width="99"/><col width="99"/><col width="99"/><col width="99"/><col width="99"/><col width="99"/><col width="99"/><col width="99"/></colgroup><tr class="ro1"><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td><td style="text-align:left;width:0.889in; " class="ce1"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td><td style="text-align:left;width:0.889in; " class="ce2"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td><td style="text-align:left;width:0.889in; " class="ce3"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Key</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Summary</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Affects Version/s</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Fix Version/s</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Component/s</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Description</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Upgrade notes</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Tags</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Impact type</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11566 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Allow resetting some JSF components state when using ajax</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.7-SNAPSHOT</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF18, 5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Layouts / Widgets</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>There are several components showing cache issues when switching screens/pages only using ajax actions.</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>JSF action listener #{jsfResetActions.resetComponents} can be used in actions that need to reset all components in the same JSF naming container</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- a "list" widget type is caching its internal state, it is only refreshed correctly when the original data it was mapping differs, but this is not a solution for all use cases (when the initial list is empty, that does not mean that the cache can be kept, for instance)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- the nxu:valueHolder component also keeps its internal state when set</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- A "shuttle" widget type using the logics made available by the SelectionActionsBean methods (to move up/down, shift from left to right, etc...) are setting the "value" attribute on selectItems components (nxu:selectItems here). This value is kept though ajax calls so are not refreshed correctly when using that kind of logics in ajaxified screens.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- maybe the chain select components (?) --&gt; to check</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>As the states need to be kept when performing ajax actions, a solution would be to define behaviours to reset the cache on some components explicitely, when performing ajax actions that changes the problematic screens.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-11564 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Add version label into the detach action in DocumentModelImpl</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF17</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF18, 5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Core</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Add version label into the documentModel detach method</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Content model Change</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11562 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Allow attaching schemas to proxies</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Core, Core SQL Storage</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Allow attaching schemas to proxies:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To define one or more schemas that should be available on all proxies, use this kind of extension point:</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- one or more schemas to be available on all proxies (independently of the type of the doc to which a proxy points),</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- read/write of properties on the proxy for this schema goes to the proxy's version,</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;extension target="org.nuxeo.ecm.core.schema.TypeService" point="doctype"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- queries on this schema for proxies go to the proxy's version,</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;proxies&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- if the same schema is available on the document to which a proxy points then it is hidden (shadowed) when accessing through the proxy.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;schema name="myschema1"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;schema name="myschema2"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Note, ACLs already behave this way (except for the query part which doesn't exist).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/proxies&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/extension&gt;</p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11543 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Allow execution of client-specific SQL at database init</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Core SQL Storage</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Some customers and even some plugins need to execute additional SQL in the database when it is initialized. This should be configurable in the repository configuration.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>In the repository configuration use &lt;sqlInitFile&gt;myconf.sql.txt&lt;/sqlInitFile&gt; to read one or more additional files.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The format of the file is documented at http://doc.nuxeo.com/x/hwQz.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-11536 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Add version label into the Document/JSON Export from Automation Rest Request</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF16</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF17, 5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Automation</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Add VersionLabel into the JSON export and Add new Getter into the org.nuxeo.ecm.automation.client.model.Document to get this information</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Content model Change</p></td></tr><tr class="ro1"><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11503 </p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Automation requests with valid credentials but that lacks some permissions on a doc should be mapped to HTTP 403 instead of 401</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF17, 5.7.1</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Automation, Nuxeo Drive</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>HTTP 401 should only be used to signal authentication issues (lack or invalid credentials, for instance the basic http auth header is lacking or invalid).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To preserve backward compat for 5.6 compatible clients, the hotfix will not change the behavior of automation server by default unless explicitly stated in {{nuxeo.conf}} with the following line.</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Backlog</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>HTTP 403 should be used to signal authorization issues: for instance when an authenticated client is trying to access a resource without being granted the permissions to do so.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>org.nuxeo.ecm.automation.server.permission.httpcode=403</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Right now {{org.nuxeo.ecm.automation.server.jaxrs.ExceptionHandler}} is mapping any authorization exceptions from the core to 401 instead of 403 which makes it impossible for the automation client to know whether there a problem with the credentials (e.g. a password has been changed) or whether the user lacks the permissions on a specific document.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>In 5.7, authorization exceptions are mapped by default to 403.</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11477 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Move Operation and Script feature from Presales Toolkit into the Nuxeo Platform</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Automation</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Importing operations created in the context of the Presales toolkit into the default Nuxeo Operations Registry.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Add following new Operations :</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- AddEntryToMultiValuedProperty</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- CreateProxyLive</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- GetLiveDocument</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- RemoveEntryOfMultiValuedProperty</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Add the following new functions into the Fn Object:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- concatenateIntoList</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- concatenateValuesAsNewList</p></td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11463 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Update nuxeo dependency management following automation client changes</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>To build automation client osgi compliant, existing libraries of nuxeo used for the client are not in osgi version. Furthermore, Pax Exam has been included for osgi compliance testing.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To get osgi versions of these dependencies, upgrades have been made:</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- javax.mail:mail upgrade from 1.4 to 1.4.5</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- org.apache.httpcomponents versions upgrade to 4.2.4 from 4.2.3</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Exclusions:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- log4j:log4j, avalon-framework:avalon-framework, logkit:logkit exclusions from: javax.persistence:persistence-api</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- commons-logging:commons-logging, org.apache.httpcomponents:httpclient-cache exclusions from: org.apache.httpcomponents:httpclient</p></td></tr><tr class="ro1"><td rowspan="10" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11440 </p></td><td rowspan="10" style="text-align:left;width:0.889in; " class="Default"><p>Long running transactions might cause Nuxeo Drive to miss some document updates</p></td><td rowspan="10" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF15</p></td><td rowspan="10" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF16, 5.7.1</p></td><td rowspan="10" style="text-align:left;width:0.889in; " class="Default"><p>Nuxeo Drive</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Suppose a user updates 3 documents in a row (e.g. using drag and drop) and that writing documents take 2s each (for instance computing some thumbnails synchronously, a S3BinaryManager blob upload or something similarly costly). Let's call the first document creation / update start start at t0.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>A new column {{log_date}} is introduced in the {{nxp_log_date}} column. By default the log_date of the old events will be null which should not be a problem.</p></td><td rowspan="10" style="text-align:left;width:0.889in; " class="Default"><p>Backlog</p></td><td rowspan="10" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The CoreSession will fire document created / updated events at t0, t0 + 2, t0 + 4. The event audit logger is an asynchronous event listener that will insert the whole batch of events in the audit table at once at time (t0 + 5).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>It is possible to set the value of the {{log_date = null}} rows to {{log_event_date}} instead.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>In the mean time let's assume that the client did two non-overlapping range queries: query 1 for the range [t0 - 2 to t0 + 3[ at time (t0 + 3) and query 2 for the range [t0 + 3, t0 + 8[ at time (t0 + 8).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The audit event logger is an asynchronous listener will only see the last document update that occurred at (t0 + 4) in the query 2. query 1 will return 0 result as the changed are not yet committed in the audit db at that time.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Therefore the range queries made by the client should not rely upon {{log_event_date}} but rather use a new {{log_date}} generated by the database at insertion time to guarantee a near monotonic behavior.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11419 </p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>Cannot restore content view with currentPage &gt; 0</p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>When restoring a content view from a {{jsonContentViewState}} and using a {{currentPage &gt; 0}}, we end up with the following stack trace:</p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>PageProviderService#getPageProvider API now take an additional DocumentModel parameter to represent the search document model</p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Caused by: org.nuxeo.ecm.core.api.ClientRuntimeException: org.nuxeo.ecm.core.api.ClientException: Cannot build query of provider 'netflix_dam_faceted_search': no search document model is set</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.query.nxql.CoreQueryDocumentPageProvider.buildQuery(CoreQueryDocumentPageProvider.java:221)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.query.nxql.CoreQueryDocumentPageProvider.getCurrentPage(CoreQueryDocumentPageProvider.java:87)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.query.api.AbstractPageProvider.setCurrentPage(AbstractPageProvider.java:171)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.query.core.PageProviderServiceImpl.getPageProvider(PageProviderServiceImpl.java:112)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.contentview.jsf.ContentViewServiceImpl.getPageProvider(ContentViewServiceImpl.java:260)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.contentview.jsf.ContentViewImpl.getPageProvider(ContentViewImpl.java:302)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.contentview.jsf.ContentViewImpl.getPageProvider(ContentViewImpl.java:309)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.contentview.jsf.ContentViewServiceImpl.restoreContentView(ContentViewServiceImpl.java:360)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.platform.contentview.seam.ContentViewRestActions.restoreContentView(ContentViewRestActions.java:85)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-11408 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Comments in the default serial workflow are not displayed in "Past tasks" view</p></td><td style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF17, 5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Workflow</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Workflow enablement filter id has been temporarily changed from "filter@SerialDocumentReview" to "filter@wf@SerialDocumentReview", and included in 5.6.0-HF17, but this change will be reverted for 5.6.0-HF18</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td rowspan="79" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11403 </p></td><td rowspan="79" style="text-align:left;width:0.889in; " class="Default"><p>org.nuxeo.ecm.automation.OperationException should not be mapped to HTTP 500</p></td><td rowspan="79" style="text-align:left;width:0.889in; " class="Default"><p>5.3.2</p></td><td rowspan="79" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="79" style="text-align:left;width:0.889in; " class="Default"><p>Automation</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Looking at the following stacktrace logged on server side:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Kept org.nuxeo.ecm.automation.OperationException mapping with HTTP 500 waiting for NXP-11094.</p></td><td rowspan="79" style="text-align:left;width:0.889in; " class="Default"><p>Backlog</p></td><td rowspan="79" style="text-align:left;width:0.889in; " class="Default"><p>API change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}Apr 11, 2013 6:34:10 PM com.sun.jersey.spi.container.ContainerResponse logException</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Made Drive wrap java.lang.UnsupportedOperationException into a new org.nuxeo.ecm.automation.InvalidOperationException, itself mapped with HTTP 400.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 SEVERE: Mapped exception to response: 500 (Internal Server Error)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Also, made the org.nuxeo.ecm.automation.server.jaxrs.ExceptionHandler map org.nuxeo.ecm.core.api.ClientException with no root cause to HTTP 400.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 javax.ws.rs.WebApplicationException: org.nuxeo.ecm.automation.OperationException: Failed to invoke operation NuxeoDrive.Move</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.server.jaxrs.ExceptionHandler.newException(ExceptionHandler.java:50)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.server.jaxrs.ExecutableResource.doPost(ExecutableResource.java:77)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at sun.reflect.GeneratedMethodAccessor47.invoke(Unknown Source)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at java.lang.reflect.Method.invoke(Method.java:597)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ObjectOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:258)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.webengine.app.jersey.WebEngineServlet.containerService(WebEngineServlet.java:60)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.webengine.app.jersey.WebEngineServlet.service(WebEngineServlet.java:44)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.webengine.jaxrs.context.RequestContextFilter.run(RequestContextFilter.java:42)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.webengine.jaxrs.HttpFilter.doFilter(HttpFilter.java:43)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.webengine.jaxrs.session.SessionCleanupFilter.run(SessionCleanupFilter.java:45)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.webengine.jaxrs.HttpFilter.doFilter(HttpFilter.java:43)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.webengine.app.WebEngineFilter.doFilter(WebEngineFilter.java:92)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.platform.ui.web.auth.NuxeoAuthenticationFilter.doFilterInternal(NuxeoAuthenticationFilter.java:548)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.platform.ui.web.auth.NuxeoAuthenticationFilter.doFilter(NuxeoAuthenticationFilter.java:345)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.Server.handle(Server.java:322)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:451)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 Caused by: org.nuxeo.ecm.automation.OperationException: Failed to invoke operation NuxeoDrive.Move</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.core.impl.InvokableMethod.invoke(InvokableMethod.java:140)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.core.impl.CompiledChainImpl.doInvoke(CompiledChainImpl.java:114)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.core.impl.CompiledChainImpl.invoke(CompiledChainImpl.java:96)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.core.impl.OperationServiceImpl.run(OperationServiceImpl.java:81)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.server.jaxrs.OperationResource.execute(OperationResource.java:42)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.server.jaxrs.ExecutableResource.doPost(ExecutableResource.java:56)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 ... 50 more</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 Caused by: java.lang.UnsupportedOperationException: Cannot move a virtual folder item.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.drive.adapter.impl.AbstractVirtualFolderItem.move(AbstractVirtualFolderItem.java:90)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.drive.service.impl.FileSystemItemManagerImpl.move(FileSystemItemManagerImpl.java:230)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.drive.operations.NuxeoDriveMove.run(NuxeoDriveMove.java:55)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at java.lang.reflect.Method.invoke(Method.java:597)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.core.impl.InvokableMethod.doInvoke(InvokableMethod.java:117)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 at org.nuxeo.ecm.automation.core.impl.InvokableMethod.invoke(InvokableMethod.java:132)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>18:34:10 ... 55 more{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The error is known and well managed server side ("Cannot move a virtual folder item"). It is logged at level SEVERE because the HTTP status is 500, which is wrong.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Err:533</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11370 </p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Flag to globally disable proxies</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF15, 5.7.1</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Core, Core SQL Storage</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>A number of projects have no use for proxies. It would be more cost-effective to have a global flag disabling proxies than having to add "{{AND ecm:isProxy = 0}}" to every custom query.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To disable proxies, add to the repository configuration:</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>When this mode is activated:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;proxies enabled="false" /&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- the {{proxies}} table is not created,</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- proxy creation will fail,</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- queries for proxies only {{ecm:isProxy = 1}} will fail,</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- queries will never do the {{UNION ALL}} and double {{JOIN}} to get proxies.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Note that this mode is incompatible with the use of features like publishing in sections.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11335 </p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Soft delete for PostgreSQL, SQL Server and Oracle</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Core SQL Storage</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Deleting documents by issuing a SQL {{DELETE}} on their {{hierarchy}} row may cause two kinds of problems in some situations:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To enable soft-delete, add to the repository configuration:</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p># some databases (Oracle with RAC for instance) have problems processing a large number of {{DELETE}} with {{ON DELETE CASCADE}} that apply recursively on the {{hierarchy}} table, in particular because this causes a large number of changes to the undo and redo logs,</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p># in a multithreaded scenario where a first thread does a {{DELETE}} on a document and therefore its {{hierarchy}} row, and a second threads tries to update the same document and that update causes a new row for a secondary table to be {{INSERT}}-ed, the row's {{FOREIGN KEY}} pointing to the deleted (in the first thread) {{hierarchy}} row will cause a constraint error.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;softDelete enabled="true" /&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>To solve this, we introduce *soft deletes*. In this mode, deleting a document does not immediately cause a {{DELETE}} but just marks the row as deleted ({{hierarchy.isdeleted = true}}). Later on, cleaning of the soft-deleted rows can be performed. To avoid seeing soft-deleted rows, all queries to the {{hierarchy}} table add an additional clause checking that the row is not soft-deleted ({{hierarchy.isdeleted IS NULL}}).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11217 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11080 Move widgets and containers styles to a specific css</p></td><td rowspan="3" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Web UI</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>All the styles concerning widgets and containers are included in the tabs_content.css file.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>style named "grids_and_widgets" should be added to theme pages that need these styles</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>css</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Now that the layouts and widgets systems are thicker and more complex, they deserve a specific css to manage the styles in a more clever way</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11199 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Make the 'summary_current_document_comments' widget be able to handle its label</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Web Foundations</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>To display the label, the 'handleLabels' control needs to be added to the widget definition:</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;widget name="summary_current_document_comments" type="summary_current_document_comments"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;controls mode="any"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;control name="handleLabels"&gt;true&lt;/control&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/controls&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/widget&gt;</p></td></tr><tr class="ro1"><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11061 </p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11168 Improve tags and tagging widgets</p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"><p>DAM, Faceted Search</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Improve the existing tags widget displaying the document tags to make it work correctly in DAM.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To keep the old behavior about re-rendering on the 'summary_current_document_tagging' widget, the 'ajaxReRender' property need to be defined on the widget instance.</p></td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="14" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>To display the label, the 'handleLabels' control needs to be added to the widget definition.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Add a new widget to be used in search forms to select a list of tags.</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The default operator will be {{OR}} between the tags (to be consistent with other widget allowing multiple selections).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;widget name="summary_current_document_tagging"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;controls mode="any"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;control name="handleLabels"&gt;true&lt;/control&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/controls&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;properties mode="any"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;property name="ajaxReRender"&gt;MultiTreeView&lt;/property&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/properties&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/widget&gt;</p></td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11056 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11080 Do not rely anymore on 'HiddenInFacetedSearch' facet</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>DAM, Faceted Search</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>This facet is set on the saved searches documents to not display them in the results.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>The saved searches are not anymore displayed in the "Saved searches" folder on the Personal workspace of the users.</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>DAM</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>However they are still inside that folder (now empty in the UI).</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This facet should be replaced by 'HiddenInNavigation' when checking about what we want to display in the faceted search results.</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>In Home / Saved searches / Faceted searches, there is a button "Migrate saved searches" to migrate the old saved searches stored inside the "Saved searches" folder. After doing that, the "Saved searches" folder can be safely deleted.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Deprecate the 'HiddenInFacetedSearch' facet and remove it from the default search document model.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The folder inside the user workspace listing the saved search should now have a custom type and a custom content view to list only the saved search.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11045 </p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>NXP-11171 Make restDocumentLink create a link when there is no document</p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>The is useful when there is no document context (can happen for some users) but navigation is still useful to access a dashboard for instance.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>By default, the main tabs generate URLs with a document or a repositoryName.</p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>If you want to force your main tab to generate an URL only with a document, you need to specify it in its action properties.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>An additional "repositoryName" attribute would be useful to build the DocumentView instance (since repository name is currently retrieved from the document)</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>It's done for the Document Management tab:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;action id="documents" link="view_documents" label="label.main.tab.documents"</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>order="40"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;category&gt;MAIN_TABS&lt;/category&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;properties&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;property name="requireDocument"&gt;true&lt;/property&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/properties&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/action&gt;</p></td></tr><tr class="ro1"><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10954 </p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Make the 'summary_current_document_states' widget be able to handle its label</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Web Foundations</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>To display the label, the 'handleLabels' control needs to be added to the widget definition:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;widget name="summary_current_document_states" type="summary_current_document_states"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;controls mode="any"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;control name="handleLabels"&gt;true&lt;/control&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/controls&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/widget&gt;</p></td></tr><tr class="ro1"><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10948 </p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Can't change label of workflow summary widget</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Layouts / Widgets</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- I create a tab with designer</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Backlog, tab_designer</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- I add a container where I put "Tasks" and "Workflow Process"</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To display the label, the 'handleLabels' control needs to be added to the widget definition:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- I change the label.</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;widget name="summary_current_document_single_tasks" type="summary_current_document_single_tasks"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Problem:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;controls mode="any"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- Titles are still the default ones.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;control name="handleLabels"&gt;true&lt;/control&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/controls&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/widget&gt;</p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10921 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Safari drag'n drop on Safari 6.0.2 doesn't work anymore</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF11, 5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>If I drag'n drop a file safari open it and doesn't try to upload it. Drag'n drop zone is not at all enabled.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Mac OS Mountain Lion 10.8.2</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Safari 6.0.2 (8536.26.17)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This is the case since the update of OS and upgrade of Safari 6.x. On Safari 5.x it worked.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10886 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Fix navigation in history for proxies and versions</p></td><td rowspan="3" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Audit</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>When a document has two or more pages in its history, it's impossible to navigate to the next pages.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Need to implement the need method hasChangedParameters(Object[]) from PageProvider interface</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Problem is that current code compares parameters already resolved on the page provider, and parameters not only resolved =&gt; let the page provider make the comparison itself.</p></td></tr><tr class="ro1"><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10793 </p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>Remove dash character from form names</p></td><td rowspan="12" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF11, 5.7.1</p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>If the "-" dash character is used in ajaxified forms, it may generate issues with ajax requests, as this character is badly encoded/decoded by the ajax re-render.</p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>JSF function nxu:jsfTagIdEscape can now be used to sanitize ids fir JSF/Ajax</p></td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="12" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Symptom is that an ajax action will work once, but not twice, and the following error is visible in the javascript console:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Error: TypeError: this._form is null</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Source File: http://localhost:8080/nuxeo/a4j/g/3_3_1.GA/org/ajax4jsf/framework.pack.js.xhtml</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Line: 2792</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>As ids on client side are usually generated from the layout or widget id, the layout service should strip this character from layout and widget names when generating ids.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>But other templates generating form names (like content view templates) should be stripping this character too =&gt; add a helper JSF function to handle these cases.</p></td></tr><tr class="ro1"><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10780 </p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Allow save without auto-checkout</p></td><td rowspan="6" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF09, 5.7.1</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Core</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>For modules that store metadata about documents in facet and update it asynchronously, we need a way to save this metadata on a checked-in document without making an auto-checkout occur.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To disable auto-checkout before a document save, do:</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>For instance the quotas need to update the computed total size even on a checked in document.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>doc.putContextData(VersioningService.DISABLE_AUTO_CHECKOUT, Boolean.TRUE);</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>doc = session.saveDocument(doc);</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Make sure that this is done only for changes that do not correspond to things that the user would like to see versioned.</p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10702 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Provide auto -relogin feature on OpenSocial Dashboard</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF08, 5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>When the http session timeout on a dashboard page, touching one of the gadget will refresh it and will end up displaying the login form in the gadget IFrame.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>We should provide a dedicated auth chain for OpenSocial gadget rendering fetching so that in case of un authenticated request it ill return a custom page that can trigger the reload of the hosting page.</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10701 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Allow FileManager to save version after creation</p></td><td rowspan="8" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF09, 5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Importer</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Allow FileManager to increment version automatically as soon as a document is created or overwritten.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Example (default is false):</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;extension target="org.nuxeo.ecm.platform.filemanager.service.FileManagerService" point="versioning"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;versioning&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;defaultVersioningOption&gt;MAJOR&lt;/defaultVersioningOption&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;versionAfterAdd&gt;true&lt;/versionAfterAdd&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/versioning&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/extension&gt;</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10694 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Improve Timeout Management in Html5 DnD</p></td><td rowspan="8" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF08, 5.6.0-HF11, 5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Web UI</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>* Make it easy to configure all http related timeouts :</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>There are 3 timeouts (expressed in milliseconds) that are configurable server wide using system properties or nuxeo.conf entries:</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>- org.nuxeo.dnd.extendedmode.timeout (default 2000) defines after how long the drop zone switches to extended import mode with metadata.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>** upload timeout</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- org.nuxeo.dnd.upload.timeout (default 30000) defines the timeout for the upload of a single file to the server (into a temporary storage).</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>** execution timeout</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- org.nuxeo.dnd.exec.timeout (default 30000) defines the timeout for the execution, after all files have been uploaded, of the actual addition of the files to the document and related processing.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* Propagate client side timeout to the server side Tx timeout for automation exec</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* Make it easy to configure the extended Mode switch</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10679 </p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>WorkManager should allow Work execution to be delayed after the transaction commit</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Core</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Many Work instances will need to read data written by the main thread that created the work instance. In order for the work instance to see this data, the main thread must have committed its transaction.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>New WorkManager APIs:</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>- void schedule(Work work, boolean afterCommit)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This means that submitting Work to the WorkManager must, in most cases, be delayed until after transaction commit.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- void schedule(Work work, Scheduling scheduling, boolean afterCommit)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>(We should leave the possibility though to execute the Work instance as soon as possible without waiting for transaction commit, in the case where the work instance does not care about it.)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10669 </p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>Wrap LDAP calls to retry the request if LDAP is temporary unavailable</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>5.4.2</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>5.4.2-HF31, 5.5.0-HF18, 5.6.0-HF07, 5.7.1</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>Directory</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Sometimes, the first request to LDAP fails with a ServiceUnavailableException.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>A new attribute {{retries}} can be set when defining LDAP server to indicates how many times the request is sent to LDAP before considering the service is really unavailable</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Another try returns the expected results.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;server name="foo"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;retries&gt;5&lt;/retries&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>So we can wrap LDAP calls to retry n times when this exception is detected.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/server&gt;</p></td></tr><tr class="ro1"><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10668 </p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Allow WorkManager scheduling to use a priority queue</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Core</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Some Work instances would benefit from being queued according to a priority ordering.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>When specifying the configuration for a Work queue, you can add:</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>An example would be fulltext indexing, which we'd want single-threaded but where the "quick" metadata changes should go before the "slower" fulltext extraction from binaries.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;usePriority&gt;true&lt;/usePriority&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>to make the queue be a PriorityQueue. In this case the Work instances inserted in the queue must be Comparable with each other.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-10643 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Allow nuxeo-diff to compare files statelessly</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Add API to get a diff URL to compare two files indenpendently of the current document.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>New method available: org.nuxeo.ecm.diff.web.DiffActionsBean#getContentDiffURL taking leftDocId and rightDocId</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10576 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Provide a new extension point to choose the default increment option for versioning</p></td><td rowspan="7" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF06, 5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Importer</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>When importing a file that already exists in the target container, Nuxeo is doing a minor increment of the version, but this is not configurable.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>New extension point "versioning" for FileManager service. Example (default is MINOR):</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Add an extension point in the FileManager service to do that.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;extension target="org.nuxeo.ecm.platform.filemanager.service.FileManagerService" point="versioning"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;versioning&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;defaultVersioningOption&gt;MAJOR&lt;/defaultVersioningOption&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/versioning&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/extension&gt;</p></td></tr><tr class="ro1"><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10551 </p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>Add a property to make inverse reference read only</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>5.4.2</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>5.4.2-HF30, 5.5.0-HF17, 5.6.0-HF06, 5.7.1</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>Directory</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>An inverse reference represents a value/property that does not belongs to the entry.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>A new attribute is available when defining an InverseReference:</p></td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="4" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>So when you edit an entry, you may want not to update the inverse reference, which could belongs to a read only directory for instance or to a directory that does not support updates.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>add readOnly="true" to skip any update of the directory defined as a target of the inverse reference.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Example :</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Having a property défined on the inverse reference will handle this use case.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;inverseReference field="parentGroups" directory="groupDirectoryMulti" dualReferenceField="subGroups" readOnly="true"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-10481 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Provide destination folder in ABOUT_TO_XXX events</p></td><td style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF06, 5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Core</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Improve ABOUT_TO_COPY and ABOUT_TO_MOVE event notifications so that they include the requested destination folder.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Should not impact existing code</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>document, event</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10435 </p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Add fine grained form control on some widget types</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Layouts / Widgets</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Following improvements on container widget types (and also layout templates) on widget label management (see NXP-4937), we need a similar fine-grained control over forms around widgets.</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Widgets now accept "control" properties by mode to control if a form is displayed around them and if they handle their label</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>tab_designer</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The idea is to add a marker on widget instances (boolean to specify whether widget should be surrounded by a form, whether this form should be ajaxified...) and make parents check it (layout template, complex, list, container and also actions widget types) to add the accurate form around the widget.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>(also need to keep backward compat on current widgets adding forms, like the container and actions widget types)</p></td></tr><tr class="ro1"><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10380 </p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Remove global form around summary view</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Web UI, Workflow</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Currently summary widgets are all in the same form, which makes it difficult to handle sub forms (see NXP-9444) and produces problems when setting up workflow variables.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Summary widgets that need a surrounding form have to specify that they need a surrounding form by adding the following control to their definition:</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Backlog, tab_designer</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;controls mode="any"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>For instance, if a workflow variable is required, adding a tag without adding it will not be possible as a validation error will occur.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;control name="addSurroundingForm"&gt;true&lt;/control&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Also the form is not using multipart/form data so files cannot be uploaded (see http://answers.nuxeo.com/questions/4120/workflow-file-widgets-only-work-under-the-workflow-tab)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/controls&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Old summary layouts defined on document type for mode "summary" will not have a surrounding form. When using the mode "grid_summary", there will be no surrounding form.</p></td></tr><tr class="ro1"><td rowspan="67" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10350 </p></td><td rowspan="67" style="text-align:left;width:0.889in; " class="Default"><p>Make relation graphs use core directly (not Jena) (except annotations)</p></td><td rowspan="67" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="67" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="67" style="text-align:left;width:0.889in; " class="Default"><p>Relations</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>When Core relation graphs were introduced, a compatibility mode was kept so that Core graph mode is used only if no Jena graph is already present an non-empty for each graph.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>If you wish to keep using Jena for some of the relation graphs, use the following contributions:</p></td><td rowspan="67" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="67" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>For 5.7, switch to using Core directly. Upgrade notes will list the config to use to keep using Jena if really needed.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;require&gt;org.nuxeo.ecm.platform.relations.default.graph&lt;/require&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;extension target="org.nuxeo.ecm.platform.relations.services.RelationService"</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>point="graphs"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;graph name="default" type="jena-or-core"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="doctype"&gt;DefaultRelation&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="backend"&gt;sql&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="databaseType"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>${org.nuxeo.ecm.sql.jena.databaseType}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="datasource"&gt;jdbc/nxrelations-default-jena&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="databaseDoCompressUri"&gt;false&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespaces&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="rdf"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>http://www.w3.org/1999/02/22-rdf-syntax-ns#</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="dcterms"&gt;http://purl.org/dc/terms/&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="nuxeo"&gt;http://www.nuxeo.org/document/uid/&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/namespaces&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/graph&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/extension&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;require&gt;org.nuxeo.ecm.platform.comment.service.default.graph&lt;/require&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;extension target="org.nuxeo.ecm.platform.relations.services.RelationService"</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>point="graphs"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;graph name="documentComments" type="jena-or-core"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="doctype"&gt;CommentRelation&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="backend"&gt;sql&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="databaseType"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>${org.nuxeo.ecm.sql.jena.databaseType}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="datasource"&gt;jdbc/comment-relations&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="databaseDoCompressUri"&gt;false&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespaces&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="comment"&gt;http://www.nuxeo.org/comments/uid&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="isCommentFor"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>http://www.nuxeo.org/predicates/isCommentFor</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="document"&gt;http://www.nuxeo.org/document/uid&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/namespaces&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/graph&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/extension&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;require&gt;org.nuxeo.ecm.platform.publisher.relations.contrib&lt;/require&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;extension target="org.nuxeo.ecm.platform.relations.services.RelationService"</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>point="graphs"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;graph name="publication" type="jena-or-core"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="doctype"&gt;PublicationRelation&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="backend"&gt;sql&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="databaseType"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>${org.nuxeo.ecm.sql.jena.databaseType}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;option name="datasource"&gt;java:/nxrelations-default-jena&lt;/option&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespaces&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="rdf"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>http://www.w3.org/1999/02/22-rdf-syntax-ns#</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="dcterms"&gt;http://purl.org/dc/terms/1.1/&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="nuxeo"&gt;http://www.nuxeo.org/document/uid/&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;namespace name="pTree"&gt;http://www.nuxeo.org/publication/tree/&lt;/namespace&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/namespaces&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/graph&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/extension&gt;</p></td></tr><tr class="ro1"><td rowspan="24" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10340 </p></td><td rowspan="24" style="text-align:left;width:0.889in; " class="Default"><p>NXQL fails on backslash at end of string</p></td><td rowspan="24" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="24" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF08, 5.7.1</p></td><td rowspan="24" style="text-align:left;width:0.889in; " class="Default"><p>Search / Query</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>A string literal with a backslash as last character cannot be parsed. This should work but does not:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>NXQL incompatibility: \\ used to mean \\ but now means \</p></td><td rowspan="24" style="text-align:left;width:0.889in; " class="Default"><p>BugDay</p></td><td rowspan="24" style="text-align:left;width:0.889in; " class="Default"><p>API change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT * FROM Document WHERE dc:title='foo\\'</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>i.e., two consecutive backslashes inside a strings were previously interpreted as two backslashes. Now they are interpreted as only one backslash.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Which has double escaping from Java code:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>There are two new helper methods to do string escaping:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- NXQL.escapeString</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>session.query("SELECT * FROM Document WHERE dc:title='foo\\\\'")</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- NXQL.escapeStringInner</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Failure:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{noformat}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>org.nuxeo.ecm.core.query.QueryParseException: org.nuxeo.ecm.core.query.QueryParseException: Syntax error: Invalid token &lt;null&gt; at offset -1 in query: SELECT * FROM Document WHERE dc:title='foo\\'</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.query.sql.SQLQueryParser.parse(SQLQueryParser.java:51)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Caused by: org.nuxeo.ecm.core.query.QueryParseException: org.nuxeo.ecm.core.query.QueryParseException: Syntax error: Invalid token &lt;null&gt; at offset -1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.query.sql.SQLQueryParser.parse(SQLQueryParser.java:41)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.query.sql.SQLQueryParser.parse(SQLQueryParser.java:47)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>... 23 more</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Caused by: org.nuxeo.ecm.core.query.QueryParseException: Syntax error: Invalid token &lt;null&gt; at offset -1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.query.sql.parser.parser.parseFailed(parser.java:466)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.query.sql.parser.parser.unrecovered_syntax_error(parser.java:457)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at java_cup.runtime.lr_parser.parse(lr_parser.java:601)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.query.sql.SQLQueryParser.parse(SQLQueryParser.java:39)</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>... 24 more</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{noformat}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="16" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10308 </p></td><td rowspan="16" style="text-align:left;width:0.889in; " class="Default"><p>Single-datasource mode to work without XA</p></td><td rowspan="16" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="16" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="16" style="text-align:left;width:0.889in; " class="Default"><p>Core, Core SQL Storage, Directory</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Using XA has costs:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To activate single-datasource mode (which is the default since Nuxeo 5.7.1), define the variable:</p></td><td rowspan="16" style="text-align:left;width:0.889in; " class="Default"><p>azure, oracle, sqlserver</p></td><td rowspan="16" style="text-align:left;width:0.889in; " class="Default"><p>Deployment change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- slower in general, as coordination is required between resources,</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- much slower on Oracle RAC,</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>nuxeo.db.singleDataSource=jdbc/NuxeoDS</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- not available on SQL Server (simulated using jTDS),</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- not available at all on Azure.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>By default this is defined from templates/common-base/nuxeo.defaults.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>To disable it, just use:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Change Nuxeo to be able to work in a mode where, in a given thread, only one database connection is used for all resources (VCS, directories, hibernate). This allows for a secure rollback.</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>    nuxeo.db.singleDataSource=</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Symptoms of the Oracle RAC problems may be errors like:</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{noformat}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>The datasource name can of course be different than jdbc/NuxeoDS, but it must be a valid datasource already defined elsewhere.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>ORA-02049: timeout: distributed transaction waiting for lock</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{noformat}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>In addition, the maximum pool size for the datasource must be enough for all the VCS connections, which means that you must have</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>nuxeo.db.max-pool-size ≥ nuxeo.vcs.max-pool-size + 2</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>(The + 2 comes from two reserved connections for the VCS lock manager and the cluster node handler.)</p></td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10306 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Automation client: add an API to get a session using a token</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF10, 5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Automation</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>We need to be able to make automation calls using the token based authentication plugin done in NXP-10268.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Added:</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>authentification, automation</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The principle is to add an API to the {{AutomationClient}} to allow getting a client Session following these steps:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- AutomationClient#getSession(String token)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* First acquire a token remotely from the server (thanks to the token authentication plugin for example) using parameters gathered by the client.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- AutomationClient#getSession(TokenCallback cb)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* Store this token locally for later use.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* Use the token to get a Session passing it as a request header, readable by the token authentication plugin.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>A {{TokenCallback}} interface will define the API to gather the token parameters, acquire a remote token, save it locally, read it locally.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10268 </p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Add a token based authentication module</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF10, 5.7.1</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Security / Rights</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>This plugin will allow to authenticate a user with a token sent as a request header.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Added:</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>authentification</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This implies:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- TokenAuthenticationService</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* A Servlet bound on basic authentication to get a generated token in the first place given some user information (username, application name, device name, device description, permission).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- TokenAuthenticator</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* A storage service to map tokens to users</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- TokenAuthenticationServlet</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* An authentication plugin to handle requests with a token header, using the {{Trusting_LM}} login module</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* A view for the current user to manage its token (for now, ability to revoke it only). For now, as this module is mostly dedicated to Nuxeo Drive (see NXP-10269), it only provides an XHTML view including a layout, but this view is not included by default in the User Center, it will be used in the specific "Nuxeo Drive" tab of the User Center.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-10255 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Make it easier to test Nuxeo with webdriver</p></td><td style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Tests</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Some helpers could be added to ease up testing + some ids in templates would be useful too</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Added helper classes LayoutElement, WidgetElement...</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Backlog</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10238 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Use FileManager service to create appropriate document type through WebDAV</p></td><td rowspan="3" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF12, 5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>WebDAV / WSS</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Currently every new document added via WebDAV are created as File type.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>If the old behavior is absolutely needed, the following Nuxeo property can be set:</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>We should detect mimetype from imported file and use FileManager service to call the corresponding importer plugin to create the adequate document type.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>nuxeo.webdav.always-create-file=true</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10235 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Add missing indexes to scale</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.5.0-HF14, 5.6.0-HF01</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.5.0-HF15, 5.6.0-HF02, 5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Core SQL Storage</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>There are missing index on fulltext and nxp_logs that impacts performances</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>For customer that have put an index on fulltext jobid you need to remove it because the name has changed:</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>performances</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>with &gt; 100kdocuments.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>DROP INDEX JOBID_ID_IDX;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>CREATE INDEX FULLTEXT_JOBID_ID_IDX ON FULLTEXT(JOBID, ID);</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>CREATE INDEX NXP_LOGS_LOG_DOC_UUID_IDX ON NXP_LOGS(LOG_DOC_UUID);</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>CREATE INDEX NXP_LOGS_LOG_EVENT_DATE_IDX ON NXP_LOGS(LOG_EVENT_DATE);</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10224 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Fix configuration templates deployment order</p></td><td rowspan="3" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF03, 5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Launcher</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>It seems there's sometimes an issue in the deployment order. For instance, a custom template depending on common template seems to be deployed before the common-base template!</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Prior to that fix, configuration templates missing a nuxeo.defaults file may sometimes be included. That's no more the case: in order to be included, a template must have a nuxeo.defaults file.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Backlog</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Also add DEBUG information.</p></td></tr><tr class="ro1"><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10219 </p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Support Microsoft's JDBC driver for SQL Server</p></td><td rowspan="9" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF02, 5.7.1</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Core SQL Storage</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>There are some changes needed to replace jtds with Microsoft's driver.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>To support XA using the Microsoft JDBC driver, some setup has to be done in the SQL Server itself. It is *NECESSARY* to follow the Configuration Instructions listed at http://msdn.microsoft.com/en-us/library/aa342335(v=sql.105).aspx</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Backlog, sqlserver</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>In particular, after the configuration, note that you must add your database user ('nuxeo' in this example) to proper role in order for him to execute XA statements:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>USE master</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>EXEC sp_grantdbaccess 'nuxeo', 'nuxeo'</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>EXEC sp_addrolemember [SqlJDBCXAUser], 'nuxeo'</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Some screenshots for the first part are visible at http://www.sqlserver-dba.com/2011/12/enable-xa-transactions-for-sql-server.html</p></td></tr><tr class="ro1"><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10210 </p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Improve pathOptimizations on Oracle</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF01</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>5.4.2-HF29, 5.5.0-HF16, 5.6.0-HF04, 5.7.1</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>Core SQL Storage</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>The DialectOracle.getInTreeSql with pathOptimizations use an "ancestors" table with a nested table to simulate an array of ancestors for each document.</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>When upgrading from 5.6 to 5.7 and using Oralce, you need to drop the ancestors table, see the ticket for more information.</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p>performances</p></td><td rowspan="6" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The index on the nested table is not used during ancestors search, the execution plan is doing a full scan on the ancestor table.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This does not scales with large amount of documents (&gt;500k). It impacts the move and permanent delete operations.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10209 </p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>Automation - SendMail: allow to not rollback the automation chain in case of an Exception</p></td><td rowspan="2" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF02, 5.7.1</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>Automation</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>If {{rollbackOnError}} is true, any {{Exception}} thrown while trying to send the mail will be rethrown, and the whole automation chain rolled back, else the exception will simply be WARNED and the chain will continue.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>New boolean optional parameter: rollbackOnError.</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>NF, NF-11, studioImpact</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Default value = true to keep the previous behavior.</p></td></tr><tr class="ro1"><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10184 </p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Fix user/group suggestion widget types</p></td><td rowspan="5" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>5.4.2-HF29, 5.5.0-HF15, 5.6.0-HF02, 5.7.1</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>Layouts / Widgets</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>There are several issues with user/group suggestion widget types:</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p>singleUserSuggestion now displays a link to the user/group by default on view, add property "displayAction" with value "nothing" to get back the old behaviour. It also displays a user/group icon by default, use property "hideIcon" with value "true" to get back the old behaviour.</p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="5" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- multiple and multiple prefixed widget types have gone out of sync</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- single user suggestion is not working anymore in view mode</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- display is not the same</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- CSV and PDF modes are not handled</p></td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10179 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Allow to use "Compatible Classic" mode for Freemarker rendering</p></td><td rowspan="7" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF02, 5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Notifications</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>If an expression evaluation returns null, Freemarker is raising this exception</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Classic Compatible mode is now set to true to render freemarker template for notifications</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{noformat}ERROR [freemarker.runtime]</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Expression document.dublincore.description is undefined on line 16, column 6 in modif.{noformat}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>whereas sometimes we want to get this null value.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The solution is to use the "Compatible Classic" mode.</p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10155 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Allow forcing refresh of content views on rendering</p></td><td rowspan="3" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.6.0-HF02, 5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Search / Query</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>As stated in the doc at http://doc.nuxeo.com/x/FQ4z, using a cache size "0" (meaning "no cache") on content views is making selections misbehave.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>When content view cache is set to 0, the content view is cached anyhow with only one instance per user (and a static cache key), when rendering the content view again, the associated page provider is refreshed.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>AT-5.6-sept, NF</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Err:510</p></td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10118 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10078 Improve AutomationClient</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Small improvements in Nuxeo AutomationClient that should be merged.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>- Added AbstractAutomationClient#setSharedRegistryExpirationDelay(long delay) to update the default delay set to 60 seconds.</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- Added HttpConnector#HttpConnector(HttpClient http, long httpConnectionTimeout) and HttpConnector#HttpConnector(HttpClient http, HttpContext ctx, long httpConnectionTimeout) to instantiate a new HttpConnector with an HTTP connection timeout.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- Added HttpAutomationClient#HttpAutomationClient(String url, long httpConnectionTimeout) and HttpAutomationClient#HttpAutomationClient(String url, long httpConnectionTimeout, long asyncAwaitTerminationTimeout) to instantiate a new HttpAutomationClient with an HTTP connection timeout and a timeout for the wiat of the asynchronous thread pool execution.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- Added AsyncAutomationClient#AsyncAutomationClient(String url, long asyncAwaitTerminationTimeout) and AsyncAutomationClient#AsyncAutomationClient(String url, ExecutorService executor, long asyncAwaitTerminationTimeout) for the same reason.</p></td></tr><tr class="ro1"><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10117 </p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>Allow UserWorkspace to built itself with a principal</p></td><td rowspan="2" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>In some case, when trying to get UserWorkspace in a Computed group resolution for instance, the current API do not let workspace creation without getting user's NuxeoPrincipal.</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>org.nuxeo.ecm.platform.userworkspace.api.UserWorkspaceService#getUserPersonalWorkspace</p></td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="2" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>But; principal creation need computed group resolution. So an infinite loop occured.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-10092 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Automation: add a generic operation similar to GetSelectedDocuments with a parameter for the selection list name</p></td><td style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Automation</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>Added GetDocumentsFromSelectionList operation.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>NF, NF-8</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10060 </p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Importer: plug a method call on node creation error and allow to continue global import task</p></td><td rowspan="8" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>Importer</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Currently, when an error occurs while creating a node ({{GenericThreadedImportTask#doCreateFolderishNode and GenericThreadedImportTask#doCreateLeafNode}}), the whole import task stops.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Added</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>NF, NF-8</p></td><td rowspan="8" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>It would be nice to be able to:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>ImporterDocumentModelFactory#processFolderishNodeCreationError(CoreSession session,</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* Execute a specific process to deal with the node creation error</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>DocumentModel parent, SourceNode node)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>* Decide if we want to stop the whole import task immediately afer such an error occurs or if we'd like to continue it.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>and</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>ImporterDocumentModelFactory#processLeafNodeCreationError(CoreSession session,</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>DocumentModel parent, SourceNode node)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>+ add default implementation in AbstractDocumentModelFactory</p></td></tr><tr class="ro1"><td rowspan="46" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10053 </p></td><td rowspan="46" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10018 Extend usage of XSD maxOccurs attribute to handle List definition</p></td><td rowspan="46" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="46" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="46" style="text-align:left;width:0.889in; " class="Default"><p>Core</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Typically, this complex type is considered as a sequence of string.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>h3. Background info</p></td><td rowspan="46" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="46" style="text-align:left;width:0.889in; " class="Default"><p>Content model Change, API change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexType name="stringSequence"&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Until 5.6 the {{maxOccurs}} attribute of the {{xs:element}} was not parsed correctly in all cases.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:sequence&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="item" type="xs:string" minOccurs="0"</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Normally, an {{xs:element}} with a {{maxoccurs}} &gt;1 should be seen as a List.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>maxOccurs="unbounded" /&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:sequence&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Until 5.6 it was only true when the {{xs:sequence}} had just one element.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexType&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>The problem is visible for complex types declaring several fields :</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>But, if the sequence contains more that one element the maxOccurs won't be used :</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexType name="complexWithSubList"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexType name="complexWithSubList"&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:sequence&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:sequence&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="fieldA" type="xs:string" /&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="fieldA" type="xs:string" /&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="items" type="xs:string" minOccurs="0"</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="items" type="xs:string" minOccurs="0"</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>maxOccurs="unbounded" /&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>maxOccurs="unbounded" /&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:sequence&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="fieldB" type="xs:string" /&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="moreitems" type="xs:string" minOccurs="0"</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>maxOccurs="unbounded" /&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:sequence&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Here in 5.6, the field "items" won't be considered as a List.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexType&gt;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>In 5.7, the parsing will be ok and items will be List&lt;String&gt;.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>and then :</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Unfortunately, until 5.6, probably because of bad copy/past a lot of schema were wrongly declared.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- items will be seen a string rather than a List of string</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- moreitems will be seen a string rather than a List of string</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexType name="relatedtextresource"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:sequence&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="relatedtextid" type="xs:string" minOccurs="0"</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>maxOccurs="unbound" /&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name="relatedtext" type="xs:string" minOccurs="0"</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>maxOccurs="unbound" /&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:sequence&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>In 5.6 this {{relatedtextresource}} was seen as a Map&lt;String, String&gt; with 2 keys, {{relatedtextid}} and {{relatedtext}}.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>In 5.7 this same item would be correctly parsed as Map&lt;String, List&lt;String&gt;&gt; with 2 keys, {{relatedtextid}} and {{relatedtext}}.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>All Nuxeo "built-in" schema where updated, like the relatedText one : https://github.com/nuxeo/nuxeo-core/commit/efadc46527cd06f0cd0ec8cb4f55595016c2a408</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>h3. What should be checked</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Inside your XSD schemas, check that the declaration of complex Type that have more than one field don't use maxOccurs="unbound" whithout any reasons.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10051 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Avoid WARN at JAX-RS app init</p></td><td rowspan="7" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Importer</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Importer: make the kill() method return a String to avoid WARN at JAX-RS Application initialization (and to have the method result message).</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>In both AbstractImporterExecutor and AbstractJaxRSImporterExecutor:</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>API change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>public void kill() becomes public String kill()</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This is the WARN we get:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>WARN [com.sun.jersey.spi.inject.Errors] The following warnings have been detected with resource and/or provider classes:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>WARNING: A HTTP GET method, public void org.nuxeo.ecm.platform.importer.executor.jaxrs.AbstractJaxRSImporterExecutor.kill(), MUST return a non-void type.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"><p>NXP-10018 </p></td><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"><p>Improve XSD Types support in schema definition</p></td><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>h2. Problems</p></td><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"><p>Added support for more XSD types, see https://jira.nuxeo.com/browse/NXP-10053 for more upgrade notes</p></td><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="112" style="text-align:left;width:0.889in; " class="Default"><p>API change, API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>When importing existing XSD schemas definition inside Nuxeo, there are some problems when some XSD types are used :</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>org.nuxeo.ecm.core.schema.types.TypeException: Failed to load XSD schema http://XXX.YYY.ZZZ</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.XSDLoader.loadSchema(XSDLoader.java:190)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.XSDLoader.loadSchema(XSDLoader.java:123)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Caused by: java.lang.NullPointerException</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.types.ListTypeImpl.&lt;init&gt;(ListTypeImpl.java:72)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.XSDLoader.createListType(XSDLoader.java:393)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.XSDLoader.createComplexType(XSDLoader.java:364)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.XSDLoader.loadComplexType(XSDLoader.java:266)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.XSDLoader.loadType(XSDLoader.java:226)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>at org.nuxeo.ecm.core.schema.XSDLoader.loadSchema(XSDLoader.java:177)</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>... 26 more</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Problems are visibles in several cases :</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>h3. one of the field is declared with {{xs:anyType}}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexType name = "UserObject" abstract = "true"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexContent&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:extension base = "xs:anyType"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexContent&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The best option is probably to consider this field as a big String (CLOB).</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>h3. one of the field is declared with {{xs:duration}}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name = "interval" type = "xs:duration"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The best option is probably to consider this field as a String.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>h3. a simple type is declated as {{enumeration}}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:simpleType name = "Gender"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:restriction base = "xs:string"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:enumeration value = "Male"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:enumeration value = "Female"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:enumeration value = "Unknown"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:restriction&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:simpleType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>For now, we have no simple way to support this at Core Level since the values validation is done at Widget level.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Err:510</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>h3. a field type uses {{xs:choice}}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:complexContent&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:extension base = "types:AbstractExtensibleObject"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:sequence&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name = "header" type = "ApplicationHeader"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:element&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:choice&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name = "error" type = "Error"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:element&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:choice maxOccurs = "unbounded"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name = "score" type = "Score"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:element name = "decisionResults" type = "DecisionResults"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:choice&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:choice&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:sequence&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:extension&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexContent&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:complexType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This could be added to the Core, but this would require significant work, and so far, not sure to see what would be the real use cases ...</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>h3. {{xs:attribute}} elements with embedded {{xs:simpleType}} definitions are not supported</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:attribute name = "Bureau"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:simpleType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:restriction base = "xs:string"&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;xs:enumeration value = "EFU"/&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:restriction&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:simpleType&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/xs:attribute&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>Even if workaround is simple, we should try to fix this.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>h2. XSD2JSON and XSDLoader</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The problem were actually reported while playing with XSD2JSON that parses XSD files to generate JSON definition for Nuxeo Studio.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>However, since XSD2JSON uses the XSDLoader of Nuxeo Core the problem reported via XSD2JSON are in fact problems inside Nuxeo Core.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>A simple workaround would be to tweak the XSD at the time XSD2JSON does the loading, this would allow to generate a usable JSON definition inside Studio, but :</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- this JSON definition won't match with the XSD</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- the XSD won't be correctly loaded by Nuxeo Core anyway</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This means that most of the work should be done directly inside the XSDLoader of Nuxeo Core.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-10006 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>importer should use path segment service for naming documents</p></td><td style="text-align:right; width:0.889in; " class="Default"><p>5.5</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.5.0-HF14, 5.6.0-HF01, 5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Importer</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>When importing a document, the file component name is renamed according to old rules. ie: foo_A is renamed in foo-a.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>If needed, the older naming rules can be selected by setting the 'nuxeo.importer.compatFilenames' to 'true'.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>NXP-9975 </p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Use PostgreSQL unlogged table for cache tables</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.6-RC3</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>Core SQL Storage</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Some tables will benefit from the new UNLOGGED table available since PostgreSQL 9.1,</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>To take effect on existing instance, acl_user, acl_user_map and aclr_modified tables need to be droped.</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"><p>performances</p></td><td rowspan="7" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>for instances cache tables:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- aclr_user which contains the list of logged users</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- aclr_user_map which contains the list of read acls for logged users</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>http://www.postgresql.org/docs/9.1/static/sql-createtable.html</p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-9940 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Translate restart page</p></td><td rowspan="3" style="text-align:right; width:0.889in; " class="Default"><p>5.6</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Launcher</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>* Server restarting page is available in english only. French labels would be:</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>bugday</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p> </p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>** Nuxeo server is restarting -&gt; Redémarrage du serveur en cours.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>** You will be automatically redirected to the login page when Nuxeo server is back online. (please, do not refresh this page) -&gt; La page d'authentification sera automatiquement affichée lorsque le serveur aura redémarré / aura fini de redémarrer. Merci de ne pas rafraîchir cette page.</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>NXP-9564 </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>don't rely on core session transactionnal wrapper for committing event bundles</p></td><td style="text-align:right; width:0.889in; " class="Default"><p>5.4</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>The core implementation is call-backing events service for handling the transaction commit. A better design would be to enlist event bundles in the transaction. This will insure that event bundles will always processed at the moment of the transaction commit.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Removed from the CoreSession transaction synchronization handles. If needed, upgrade your code in a transaction synchronization listener.</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>API change</p></td></tr><tr class="ro1"><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>NXP-8732 </p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>Add Drag &amp; drop in DAM domain</p></td><td rowspan="3" style="text-align:right; width:0.889in; " class="Default"><p>5.5</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>DAM</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Drag and drop to and content on repository don't work on DAM domain (asset librairy)</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"><p>upgrade friom nuxeo DM 5.4.2 to nuxeo platform 5.5 with DM and DAM module.</p></td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="3" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>work fine in DM domain (default domain)</p></td></tr><tr class="ro1"><td rowspan="33" style="text-align:left;width:0.889in; " class="Default"><p>NXP-8630 </p></td><td rowspan="33" style="text-align:left;width:0.889in; " class="Default"><p>Fix inverted event handler EL expression evaluation</p></td><td rowspan="33" style="text-align:right; width:0.889in; " class="Default"><p>5.5</p></td><td rowspan="33" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="33" style="text-align:left;width:0.889in; " class="Default"><p>Automation</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>For instance,</p></td><td rowspan="33" style="text-align:left;width:0.889in; " class="Default"><p>Use the new parameter "condition" instead of "expression" when migrating event handlers</p></td><td rowspan="33" style="text-align:left;width:0.889in; " class="Default"><p>AT-5.6-sept, Backlog, STAN_icebox, studioImpact</p></td><td rowspan="33" style="text-align:left;width:0.889in; " class="Default"><p>Configuration format change</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>If we have an expression like</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>!Document.hasFacet("Folderish")</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>It will execute the event handler only if the document DOES HAVE the facet folderish</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>From org.nuxeo.ecm.automation.core.events.EventHandler:250</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>if (expression != null) {</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>if (expr == null) {</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>expr = Scripting.newExpression(expression);</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>if ((Boolean) expr.eval(ctx)) {</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>return false;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>return true;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>is wrong and should be</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>if (expression != null) {</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>if (expr == null) {</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>expr = Scripting.newExpression(expression);</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>if (!(Boolean) expr.eval(ctx)) {</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>return false;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>}</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>return true;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{code}</p></td></tr><tr class="ro1"><td rowspan="27" style="text-align:left;width:0.889in; " class="Default"><p>NXP-7672 </p></td><td rowspan="27" style="text-align:left;width:0.889in; " class="Default"><p>Handle CSS3 format in theme styling files</p></td><td rowspan="27" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="27" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="27" style="text-align:left;width:0.889in; " class="Default"><p>Themes</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>For instance, the following change was made for the parsing to pass:</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>The flute CSS parser has now been replaced by phloc-css (https://code.google.com/p/phloc-css/)</p></td><td rowspan="27" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="27" style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{noformat}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>The following dependencies have been removed from the dependencyManagement of Nuxeo root pom:</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>/*-- =Buttons */</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>.button, input.button {</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;dependency&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>box-shadow:inset 0px 1px 0px 0px #fff;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;groupId&gt;org.milyn&lt;/groupId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f5f2f5), color-stop(1, #dfdfdf) );</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;artifactId&gt;milyn-magger&lt;/artifactId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- background:-moz-linear-gradient( center top, #f5f2f5 5%, #dfdfdf 100% );</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;version&gt;1.3.1-NXP-7750&lt;/version&gt; &lt;!-- removed duplicate batik classes --&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- background: linear-gradient( center top, #f5f2f5 5%, #dfdfdf 100% );</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/dependency&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>- filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f5f2f5', endColorstr='#dfdfdf');</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;dependency&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>background-color:#dfdfdf;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;groupId&gt;org.milyn&lt;/groupId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>border-radius:3px;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;artifactId&gt;milyn-commons&lt;/artifactId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>border:1px solid #c6c6c6;</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;version&gt;1.3.1&lt;/version&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>{noformat}</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/dependency&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;dependency&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;groupId&gt;org.milyn&lt;/groupId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;artifactId&gt;flute&lt;/artifactId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;version&gt;1.3-gg2&lt;/version&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/dependency&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;dependency&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;groupId&gt;org.w3c&lt;/groupId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;artifactId&gt;sac&lt;/artifactId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;version&gt;1.3&lt;/version&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;groupId&gt;com.phloc&lt;/groupId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;artifactId&gt;phloc-css&lt;/artifactId&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;version&gt;3.3.1&lt;/version&gt;</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>&lt;/dependency&gt;</p></td></tr><tr class="ro1"><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>NXP-4147 </p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>VCS: allow queries about tags using NXQL</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>5.7.1</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>Core SQL Storage</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>We need to retrieve and paginate documents that are referenced by the tag service.</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>Examples from the doc:</p></td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"> </td><td rowspan="9" style="text-align:left;width:0.889in; " class="Default"><p>API added</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>This can be achieved by extending NXQL for being able to evaluate expression like</p></td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT * FROM Document WHERE ecm:tag = 'tag1'</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT * from Document WHERE ecm:tag IN ('photo','movie');</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT * FROM Document WHERE ecm:tag IN ('tag1', 'tag2') -- documents with either tag</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT * FROM Document WHERE ecm:tag/* = 'tag1' AND ecm:tag/* = 'tag2' -- documents with both tags</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>The first and critical need is to be able to evaluate expression using the equal operator</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT ecm:tag FROM Document WHERE dc:title = 'something' -- with queryAndFetch</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT ecm:tag FROM Document WHERE ecm:tag LIKE 'abc%' -- with queryAndFetch</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT * FROM Document WHERE ecm:tag = 'photo'</p></td><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT ecm:tag/*1 FROM Document WHERE ecm:tag/*1 LIKE 'abc%' AND ecm:tag/*2 = 'tag1'</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"><p> </p></td><td style="text-align:left;width:0.889in; " class="Default"><p>SELECT ecm:tag FROM Document WHERE ecm:tag LIKE 'abc%' AND ecm:tag/* = 'tag1' -- simpler version of above</p></td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr><tr class="ro1"><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td><td style="text-align:left;width:0.889in; " class="Default"> </td></tr></table></body></html>